<div flex ng-controller="generalController" layout="column">

	<md-content class="md-padding" ng-init="menuNavItem = 'agents'">
		<md-nav-bar md-selected-nav-item="menuNavItem" nav-bar-aria-label="navigation menu">
			<md-nav-item id="header_logo" md-nav-href="#/" name="logo" aria-label="img logo">
				<img aria-label="Logo image" src="/plugins/wazuh/icon.png" height="44" weight="252"></img>
			</md-nav-item>
			<md-nav-item md-nav-href="#/agents" name="agents">Agents</md-nav-item>
			<md-nav-item md-nav-href="#/manager" name="manager">Manager</md-nav-item>
			<md-nav-item md-nav-href="#/ruleset" name="ruleset">Ruleset</md-nav-item>
			<md-nav-item md-nav-href="#/settings" name="settings">Settings</md-nav-item>
		</md-nav-bar>
	</md-content>

	<md-progress-linear md-mode="indeterminate" ng-show="load"></md-progress-linear>

	<div flex layout="row" ng-if="!load">
		<md-content flex id="content" layout-padding>
			<md-toolbar md-colors="::{background: 'accent-A200'}" style="height: 64px;">
				<div class="md-toolbar-tools" layout="row" layout-align="space-between center">
					<h2 ng-show="_agent">{{_agent.id}} - {{_agent.name}} <span ng-show="_agent.id == '000'">(Manager)</span></h2>
					<h2 ng-show="!_agent">Select an agent to start visualizing data</h2>
					<span layout="row" flex="40">
					<md-autocomplete flex md-no-cache="true" md-selected-item="_agent" md-selected-item-change="submenuNavItem == '' ? submenuNavItem = 'overview' : null" md-search-text="search"
						md-items="item in agentsSearch(search)" md-item-text="item.name" md-min-length="1" md-no-asterisk="true" md-menu-class="autocomplete-custom-agents-bar"
						placeholder="Search agent hostname, ID or IP address">
						<md-item-template>
							<span class="item-title">
            <span><strong md-highlight-text="search" md-highlight-flags="i"> {{item.name}} ({{item.id}}) </strong></span>
					</span>
					<span class="item-metadata">
								<span class="item-metastat" md-highlight-text="search" md-highlight-flags="i"> {{item.ip}} ({{item.status}}) </span>
					</span>
					</md-item-template>
					<md-not-found>
						No agents matching "{{search}}" were found.
					</md-not-found>
					</md-autocomplete>
					<md-button md-colors="::{background: 'accent-200'}" class="md-fab md-primary md-mini" aria-label="Add agent">
						<i class="fa fa-plus" aria-hidden="true"></i>
					</md-button>
					</span>
				</div>
			</md-toolbar>
			<md-content ng-show="_agent" class="md-padding">
				<md-nav-bar md-selected-nav-item="submenuNavItem" nav-bar-aria-label="navigation submenu">
					<md-nav-item md-nav-click="submenuNavItem = 'overview'" name="overview">Overview</md-nav-item>
					<md-nav-item md-nav-click="submenuNavItem = 'fim'" name="fim">File Integrity</md-nav-item>
					<md-nav-item md-nav-click="submenuNavItem = 'policy_monitoring'" name="policy_monitoring">Policy Monitoring</md-nav-item>
				</md-nav-bar>
			</md-content>