<div ng-if="!ctrl.init && !ctrl.loading" class="" layout="column" layout-align="start space-around">
    <div ng-hide="wazuh_table_loading || showNoAgents">
        <div layout="column" layout-align="start">
            <div layout="row" class="wz-padding-left-8 wz-padding-right-8 wz-margin-top-10" layout-align="start stretch">
                <md-card flex="50" class="wz-md-card">
                    <md-card-content>
                        <span class="wz-headline-title">Status</span>
                        <md-divider class="wz-margin-top-10"></md-divider>
                        <div layout="row">
                            <div flex layout="column">
                                <div layout="row" class="wz-padding-top-10">
                                    <p flex="50">Active</p>
                                    <p class="wz-text-right color-grey">{{ctrl.agentsCountActive}}</p>
                                </div>
                                <div layout="row" class="wz-padding-top-10">
                                    <p flex="50">Disconnected</p>
                                    <p class="wz-text-right color-grey">{{ctrl.agentsCountDisconnected}}</p>
                                </div>
                            </div>
                            <div flex layout="column">
                                <div layout="row" class="wz-padding-top-10">
                                    <p flex="50">Never connected</p>
                                    <p class="wz-text-right color-grey">{{ctrl.agentsCountNeverConnected}}</p>
                                </div>
                                <div layout="row" class="wz-padding-top-10">
                                    <p flex="50">Agents coverage</p>
                                    <p class="wz-text-right color-grey">{{(ctrl.agentsCoverity | number:2)}}%</p>
                                </div>
                            </div>
                        </div>
                    </md-card-content>
                </md-card>
                <md-card flex="50" class="wz-md-card">
                    <md-card-content>
                        <span class="wz-headline-title">Top</span>
                        <md-divider class="wz-margin-top-10"></md-divider>
                        <div layout="row" class="wz-padding-top-10">
                            <p flex="35" class="manager-status-subtitle">Last registered agent</p>
                            <p ng-if="ctrl.lastAgent.id !== '000'" class="wz-text-right wz-text-link" tooltip="Click to open this agent"
                                tooltip-placement="right" ng-click="ctrl.showAgent(ctrl.lastAgent)">{{ctrl.lastAgent.name}}</p>
                            <p ng-if="ctrl.lastAgent.id === '000'" class="wz-text-right" tooltip-placement="right">{{ctrl.lastAgent.name}}
                                (manager)</p>
                        </div>
                        <div layout="row" class="wz-padding-top-10">
                            <p flex="35" class="manager-status-subtitle">Higher activity</p>
                            <p ng-show="ctrl.mostActiveAgent.id !== '000'" class="wz-text-right wz-text-link" tooltip="Click to open this agent"
                                tooltip-placement="right" ng-click="ctrl.showAgent(ctrl.mostActiveAgent)">{{ctrl.mostActiveAgent.name}}</p>
                            <p ng-show="ctrl.mostActiveAgent.id === '000'" class="wz-text-right" tooltip-placement="right">{{ctrl.mostActiveAgent.name}}</p>
                        </div>
                    </md-card-content>
                </md-card>
            </div>
        </div>
        <div ng-show="!registerNewAgent">
            <div layout="row" class="md-padding">
                <wz-tag-filter flex path="'/agents'" query-fn="ctrl.query(q, search)" fields-model="ctrl.searchBarModel"></wz-tag-filter>
                <md-button class="agents-prev-btn btn btn-info" style="height: 48px;margin: 0px 0 0 8px!important;"
                    ng-click="ctrl.reloadList()"><i class="fa fa-fw fa-refresh"></i> Refresh</md-button>
            </div>
            <div layout="row">
                <md-card flex class="wz-md-card _md flex md-margin-h">
                    <md-card-actions ng-if="adminMode" layout="row" layout-align="end center" class="wz-card-actions wz-card-actions-top">
                        <a ng-click="ctrl.registerNewAgent(true)">Register new agent <i aria-hidden="true" class="fa fa-plus"></i></a>
                        <span flex></span>
                    </md-card-actions>
                    <md-card-content class="wz-padding-bottom-30">
                        <wz-table custom-columns="true" flex path="'/agents'" keys="[{value: 'id', width: '75px'},'name','ip','status','group','os.name','os.version','version', 'dateAdd', 'lastKeepAlive']"
                            allow-click="true" row-sizes="[17,15,13]"></wz-table>
                    </md-card-content>
                    <md-card-actions layout="row" layout-align="end center" class="wz-card-actions layout-align-end-center layout-row">
                        <a class="wz-text-link cursor-pointer small md-button md-ink-ripple" id="btnDownload" ng-click="ctrl.downloadCsv()">Formatted
                            <i aria-hidden="true" class="fa fa-download"></i></a>
                    </md-card-actions>
                </md-card>
            </div>
        </div>
    </div>
    <div ng-show="!wazuh_table_loading && showNoAgents && !registerNewAgent">
        <div class="md-padding text-center">
            <img class="wz-margin-top-17" src="/plugins/wazuh/img/agent.png" style="width: 10%; max-width: 175px;">
            <h3 class="euiTitle wzEuiTitle wz-margin-bottom-10 wz-margin-top-16">There are no registered agents yet</h3>
            <div class="euiText euiText--small euiStat__description wz-text-gray">
                <p>You can start registering agents by following these steps!</p>
            </div>
        </div>
    </div>
    <div class="col-md-12 wz-margin-bottom-25" ng-show="!wazuh_table_loading && (showNoAgents || registerNewAgent)">
        <div id="content" layout="row" class="wz-padding-bottom-14" ng-show="registerNewAgent">
            <md-button class="md-icon-button" style="margin: 5px!important;" aria-label="Back to list" tooltip="Back"
                tooltip-placement="bottom" ng-click="ctrl.registerNewAgent(false)"><i class="fa fa-fw fa-arrow-left"
                    aria-hidden="true"></i></md-button>
            <h1 class="font-size-18 wz-margin-top-16"> Register new agent</h1>
        </div>
        <div ng-if="adminMode" ng-class="registerNewAgent ? ['registerNewAgent', 'md-padding-h'] : ''">
            <wz-register-agents reload="ctrl.reloadList()"></wz-register-agents>
        </div>
    </div>
    <div ng-show="!wazuh_table_loading && showNoAgents && !registerNewAgent">
        <div class="md-padding text-center wz-margin-top-10">
            <a target="_blank" ng-href="https://documentation.wazuh.com/current/user-manual/registering/index.html">
                <span ng-if="adminMode">Or take a look at the other methods of registering agents in our documentation</span>
                <span ng-if="!adminMode">Take a look at how you can register agents in our documentation</span>
                <i class="fa fa-info-circle" aria-hidden="true"></i></a>
        </div>
    </div>
</div>