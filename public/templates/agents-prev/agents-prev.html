<div ng-if="!ctrl.init && !ctrl.loading" class="md-padding" layout="column" layout-align="start space-around">
    <div layout="row" layout-align="space-between stretch">
        <md-card flex class="no-margin-left wz-md-card">
            <md-card-content>
                <span class="wz-headline-title">Status</span>
                <md-divider class="wz-margin-top-10"></md-divider>
                <div layout="row">
                    <div flex layout="column">
                        <div layout="row" class="wz-padding-top-10">
                            <p flex="50">Active</p>
                            <p class="wz-text-right color-grey">{{ctrl.agentsCountActive}}</p>
                        </div>
                        <div layout="row" class="wz-padding-top-10">
                            <p flex="50">Disconnected</p>
                            <p class="wz-text-right color-grey">{{ctrl.agentsCountDisconnected}}</p>
                        </div>
                    </div>
                    <div flex layout="column">
                        <div layout="row" class="wz-padding-top-10">
                            <p flex="50">Never connected</p>
                            <p class="wz-text-right color-grey">{{ctrl.agentsCountNeverConnected}}</p>
                        </div>
                        <div layout="row" class="wz-padding-top-10">
                            <p flex="50">Agents coverage</p>
                            <p class="wz-text-right color-grey">{{(ctrl.agentsCoverity | number:2)}}%</p>
                        </div>
                    </div>
                </div>
            </md-card-content>
        </md-card>
        <md-card flex class="no-margin-right wz-md-card">
            <md-card-content>
                <span class="wz-headline-title">Top</span>
                <md-divider class="wz-margin-top-10"></md-divider>
                <div layout="row" class="wz-padding-top-10">
                    <p flex="35" class="manager-status-subtitle">Last registered agent</p>
                    <p ng-if="ctrl.lastAgent.id !== '000'" class="wz-text-right wz-text-link" tooltip="Click to open this agent"
                        tooltip-placement="right" ng-click="ctrl.showAgent(ctrl.lastAgent)">{{ctrl.lastAgent.name}}</p>
                    <p ng-if="ctrl.lastAgent.id === '000'" class="wz-text-right" tooltip-placement="right">{{ctrl.lastAgent.name}}
                        (manager)</p>
                </div>
                <div layout="row" class="wz-padding-top-10">
                    <p flex="35" class="manager-status-subtitle">Higher activity</p>
                    <p ng-show="ctrl.mostActiveAgent.id !== '000'" class="wz-text-right wz-text-link" tooltip="Click to open this agent"
                        tooltip-placement="right" ng-click="ctrl.showAgent(ctrl.mostActiveAgent)">{{ctrl.mostActiveAgent.name}}</p>
                    <p ng-show="ctrl.mostActiveAgent.id === '000'" class="wz-text-right" tooltip-placement="right">{{ctrl.mostActiveAgent.name}}</p>
                </div>
            </md-card-content>
        </md-card>
    </div>

    <wz-tag-filter path="'/agents'" keys="['name','ip','status', 'manager', 'group','os.name','os.version','os.platform', 'version', 'node_name']"
        query-fn="ctrl.query(q, search)"></wz-tag-filter>

    <div layout="row" class="margin-top-30">
        <wz-table flex path="'/agents'" keys="['id',{value:'name',size:2},'ip','status','group','os.name','os.version','version']"
            allow-click="true" row-sizes="[17,15,13]">
        </wz-table>
    </div>

    <div layout="row" class="wz-margin-top-10">
        <span flex></span>
        <a class="small" id="btnDownload" ng-click="ctrl.downloadCsv()">Formatted
            <i aria-hidden="true" class="fa fa-download"></i>
        </a>
    </div>
</div>